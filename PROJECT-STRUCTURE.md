# é¡¹ç›®ç»“æ„è¯¦è§£

## ğŸ“ å®Œæ•´ç›®å½•æ ‘

```
æ‹¼å›¾æ¸¸æˆ/
â”‚
â”œâ”€â”€ ğŸ“¦ backend/                          # åç«¯æœåŠ¡ï¼ˆFastAPIï¼‰
â”‚   â”œâ”€â”€ main.py                       # ä¸»æœåŠ¡æ–‡ä»¶ï¼ˆä¸Šä¼ +åˆ‡å‰²æ¥å£ï¼‰
â”‚   â”œâ”€â”€ requirements.txt                # Pythonä¾èµ–åŒ…åˆ—è¡¨
â”‚   â”œâ”€â”€ uploads/                      # ä¸Šä¼ çš„åŸå›¾ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ grid_images/                  # åˆ‡å‰²åçš„æ‹¼å›¾å—ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ static/                       # é™æ€èµ„æºç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â”‚   â”œâ”€â”€ uploads/                  # åŸå›¾é™æ€è®¿é—®
â”‚   â”‚   â””â”€â”€ grid_images/             # æ‹¼å›¾å—é™æ€è®¿é—®
â”‚   â””â”€â”€ README.md                     # åç«¯éƒ¨ç½²æŒ‡å—
â”‚
â”œâ”€â”€ ğŸ“± miniprogram/                      # å¾®ä¿¡å°ç¨‹åºå‰ç«¯
â”‚   â”œâ”€â”€ app.js                        # å°ç¨‹åºå…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ app.json                      # å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ app.wxss                      # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ sitemap.json                  # ç«™ç‚¹åœ°å›¾
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                        # é¡µé¢ç›®å½•
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ index/                    # é¦–é¡µï¼ˆå¯é€‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”‚   â”œâ”€â”€ index.wxml
â”‚   â”‚   â”‚   â”œâ”€â”€ index.wxss
â”‚   â”‚   â”‚   â””â”€â”€ index.json
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ upload/                   # ä¸Šä¼ é¡µé¢ï¼ˆCanvasåˆ‡å‰²ç‰ˆï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ upload.js             # å›¾ç‰‡ä¸Šä¼ +Canvasåˆ‡å‰²é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ upload.wxml           # é¡µé¢ç»“æ„
â”‚   â”‚   â”‚   â”œâ”€â”€ upload.wxss           # é¡µé¢æ ·å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ upload.json           # é¡µé¢é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ Canvasåˆ‡å‰²ä¿®å¤æŒ‡å—.md   # Canvasåˆ‡å‰²è¯´æ˜
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ split/                    # æ™ºèƒ½åˆ‡å‰²é¡µé¢ï¼ˆåç«¯åˆ‡å‰²ç‰ˆï¼‰â­
â”‚   â”‚       â”œâ”€â”€ split.js              # é¡µé¢é€»è¾‘ï¼ˆä¸Šä¼ +æ¸¸æˆï¼‰
â”‚   â”‚       â”œâ”€â”€ split.wxml            # é¡µé¢ç»“æ„
â”‚   â”‚       â”œâ”€â”€ split.wxss            # é¡µé¢æ ·å¼
â”‚   â”‚       â”œâ”€â”€ split.json            # é¡µé¢é…ç½®
â”‚   â”‚       â””â”€â”€ README.md            # å‰ç«¯é…ç½®æŒ‡å—
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                        # å·¥å…·å‡½æ•°ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚   â””â”€â”€ util.js
â”‚   â”‚
â”‚   â”œâ”€â”€ images/                       # å›¾ç‰‡èµ„æº
â”‚   â”‚   â””â”€â”€ puzzle/
â”‚   â”‚       â””â”€â”€ 1.jpg
â”‚   â”‚
â”‚   â””â”€â”€ .codebuddy/                   # é¡¹ç›®æ•°æ®ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ ğŸ“š æ–‡æ¡£/                           # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ IDE-README.md                 # IDEå¼€å‘æŒ‡å—ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ QUICKSTART.md                 # å¿«é€Ÿå¯åŠ¨æŒ‡å—
â”‚   â”œâ”€â”€ PROJECT-STRUCTURE.md          # é¡¹ç›®ç»“æ„è¯¦è§£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ æ‹¼å›¾æ¸¸æˆä½¿ç”¨è¯´æ˜.md           # ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ
â”‚   â”œâ”€â”€ å›¾ç‰‡å¤„ç†å¤±è´¥è¯Šæ–­æŒ‡å—.md         # é—®é¢˜è¯Šæ–­æŒ‡å—
â”‚   â””â”€â”€ README.md                     # é¡¹ç›®ä¸»README
â”‚
â””â”€â”€ ğŸ—‘ï¸ .git/                          # Gitç‰ˆæœ¬æ§åˆ¶ï¼ˆå¯é€‰ï¼‰
```

## ğŸ¯ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### åç«¯æ ¸å¿ƒæ–‡ä»¶

#### main.py
**åŠŸèƒ½**ï¼šFastAPIä¸»æœåŠ¡æ–‡ä»¶

**ä¸»è¦æ¥å£**ï¼š
- `GET /` - æ ¹è·¯å¾„ï¼ŒæœåŠ¡ä¿¡æ¯
- `POST /upload` - ä¸Šä¼ å›¾ç‰‡å¹¶åˆ‡å‰²æˆ3Ã—3
- `GET /health` - å¥åº·æ£€æŸ¥
- `/static/*` - é™æ€èµ„æºè®¿é—®

**å…³é”®å‡½æ•°**ï¼š
- `split_to_3x3()` - å›¾ç‰‡åˆ‡å‰²é€»è¾‘
- `upload_and_split()` - ä¸Šä¼ å¤„ç†æ¥å£

**é…ç½®é¡¹**ï¼š
```python
UPLOAD_DIR = "uploads"       # ä¸Šä¼ ç›®å½•
GRID_DIR = "grid_images"    # åˆ‡å‰²å›¾ç‰‡ç›®å½•
STATIC_DIR = "static"        # é™æ€èµ„æºç›®å½•
allow_origins=["*"]          # CORSé…ç½®ï¼ˆä¸Šçº¿éœ€ä¿®æ”¹ï¼‰
```

### å‰ç«¯æ ¸å¿ƒæ–‡ä»¶

#### split.js
**åŠŸèƒ½**ï¼šæ™ºèƒ½åˆ‡å‰²é¡µé¢é€»è¾‘

**ä¸»è¦æ–¹æ³•**ï¼š
- `chooseImage()` - é€‰æ‹©å›¾ç‰‡
- `uploadAndSplit()` - ä¸Šä¼ åˆ°åç«¯
- `startGame()` - å¼€å§‹æ¸¸æˆ
- `movePiece()` - ç§»åŠ¨æ‹¼å›¾å—
- `checkWin()` - æ£€æŸ¥èƒœåˆ©

**æ•°æ®ç»“æ„**ï¼š
```javascript
data: {
  originalImage: "",        // åŸå›¾è·¯å¾„
  gridImages: [],          // 9å¼ åˆ‡å‰²åçš„å›¾ç‰‡URL
  puzzlePieces: [],        // 9ä¸ªæ‹¼å›¾å—å¯¹è±¡
  baseUrl: "http://...",  // åç«¯æ¥å£åœ°å€ âš ï¸éœ€é…ç½®
  steps: 0,              // æ¸¸æˆæ­¥æ•°
  seconds: 0,            // æ¸¸æˆç§’æ•°
  formatTime: '00:00',    // æ ¼å¼åŒ–æ—¶é—´
  gameStarted: false,      // æ¸¸æˆæ˜¯å¦å¼€å§‹
  showNumbers: false,      // æ˜¯å¦æ˜¾ç¤ºæ•°å­—
  showVictory: false      // æ˜¯å¦æ˜¾ç¤ºèƒœåˆ©å¼¹çª—
}
```

#### split.wxml
**åŠŸèƒ½**ï¼šé¡µé¢ç»“æ„

**ä¸»è¦åŒºåŸŸ**ï¼š
1. ä¸Šä¼ åŒºåŸŸ - ç”¨æˆ·ç‚¹å‡»ä¸Šä¼ 
2. åˆ‡å‰²é¢„è§ˆ - æ˜¾ç¤º9å¼ åˆ‡å‰²åçš„å›¾ç‰‡
3. æ¸¸æˆåŒºåŸŸ - æ‹¼å›¾æ¸¸æˆç•Œé¢
4. èƒœåˆ©å¼¹çª— - æ¸¸æˆå®Œæˆæç¤º

#### split.wxss
**åŠŸèƒ½**ï¼šé¡µé¢æ ·å¼

**ä¸»è¦æ ·å¼ç±»**ï¼š
- `.container` - å®¹å™¨æ¸å˜èƒŒæ™¯
- `.upload-box` - ä¸Šä¼ æ¡†æ ·å¼
- `.grid-container` - åˆ‡å‰²ç»“æœç½‘æ ¼
- `.puzzle-grid` - æ‹¼å›¾æ¸¸æˆç½‘æ ¼
- `.puzzle-piece` - æ‹¼å›¾å—æ ·å¼

## ğŸ”„ æ•°æ®æµç¨‹å›¾

### å›¾ç‰‡ä¸Šä¼ æµç¨‹
```
ç”¨æˆ·ç‚¹å‡»"ä¸Šä¼ å›¾ç‰‡"
    â†“
wx.chooseMedia()
    â†“
è·å–tempFilePath
    â†“
wx.uploadFile(POST /upload)
    â†“
åç«¯æ¥æ”¶å›¾ç‰‡
    â†“
ä¿å­˜åˆ° uploads/
    â†“
PILåˆ‡å‰²æˆ3Ã—3
    â†“
ä¿å­˜9å¼ å›¾åˆ° grid_images/
    â†“
è¿”å›JSON: {
  code: 200,
  data: {
    grid_urls: [
      "/static/grid_images/xxx_1.jpg",
      "/static/grid_images/xxx_2.jpg",
      ...
    ]
  }
}
    â†“
å°ç¨‹åºæ¥æ”¶å“åº”
    â†“
æ˜¾ç¤º9å¼ å›¾ç‰‡é¢„è§ˆ
    â†“
ç”¨æˆ·ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"
```

### æ‹¼å›¾æ¸¸æˆæµç¨‹
```
åˆ›å»º9ä¸ªæ‹¼å›¾å—å¯¹è±¡
    â†“
æ™ºèƒ½æ‰“ä¹±ï¼ˆ50æ¬¡éšæœºç§»åŠ¨ï¼‰
    â†“
åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€
    â†“
ç”¨æˆ·ç‚¹å‡»æ‹¼å›¾å—
    â†“
æ£€æŸ¥æ˜¯å¦ä¸ç©ºæ ¼ç›¸é‚»
    â†“
äº¤æ¢ä½ç½®ï¼ˆpiece <-> emptyï¼‰
    â†“
æ›´æ–°æ­¥æ•° +1
    â†“
æ£€æŸ¥æ‰€æœ‰å—æ˜¯å¦å½’ä½
    â†“
æ˜¯ â†’ æ˜¾ç¤ºèƒœåˆ©å¼¹çª—
å¦ â†’ ç»§ç»­æ¸¸æˆ
```

## ğŸ”§ é…ç½®æ–‡ä»¶è¯¦è§£

### app.jsonï¼ˆå°ç¨‹åºå…¨å±€é…ç½®ï¼‰

```json
{
  "pages": [
    "pages/index/index",
    "pages/upload/upload",
    "pages/split/split"      // âš ï¸ éœ€è¦æ·»åŠ 
  ],
  "window": {
    "backgroundTextStyle": "light",
    "navigationBarBackgroundColor": "#667eea",
    "navigationBarTitleText": "è‡ªå®šä¹‰æ‹¼å›¾æ¸¸æˆ",
    "navigationBarTextStyle": "white"
  },
  "sitemapLocation": "sitemap.json"
}
```

### split.jsonï¼ˆé¡µé¢é…ç½®ï¼‰

```json
{
  "navigationBarTitleText": "æ™ºèƒ½åˆ‡å‰²æ‹¼å›¾",
  "navigationBarBackgroundColor": "#667eea",
  "navigationBarTextStyle": "white",
  "enablePullDownRefresh": false
}
```

### requirements.txtï¼ˆPythonä¾èµ–ï¼‰

```
fastapi==0.104.1          # Webæ¡†æ¶
uvicorn[standard]==0.24.0  # ASGIæœåŠ¡å™¨
python-multipart==0.0.6    # æ–‡ä»¶ä¸Šä¼ 
Pillow==10.0.1            # å›¾ç‰‡å¤„ç†
aiofiles==23.2.1           # å¼‚æ­¥æ–‡ä»¶æ“ä½œ
```

## ğŸ¨ æ ·å¼ç³»ç»Ÿ

### é¢œè‰²å˜é‡
```css
/* ä¸»è‰²è°ƒ */
--primary-color: #667eea;
--secondary-color: #764ba2;
--accent-color: #4facfe;

/* æ–‡å­—é¢œè‰² */
--text-primary: white;
--text-secondary: rgba(255,255,255,0.8);
--text-muted: rgba(255,255,255,0.6);

/* èƒŒæ™¯è‰² */
--bg-dark: rgba(0,0,0,0.3);
--bg-light: rgba(255,255,255,0.1);
```

### å°ºå¯¸è§„èŒƒ
```css
/* é—´è· */
--spacing-xs: 10rpx;
--spacing-sm: 20rpx;
--spacing-md: 30rpx;
--spacing-lg: 40rpx;

/* åœ†è§’ */
--radius-sm: 8rpx;
--radius-md: 15rpx;
--radius-lg: 20rpx;
--radius-full: 40rpx;

/* å­—å· */
--font-xs: 24rpx;
--font-sm: 28rpx;
--font-md: 32rpx;
--font-lg: 48rpx;
```

## ğŸ”Œ æ¥å£æ–‡æ¡£

### POST /upload

**è¯·æ±‚**ï¼š
```http
POST /upload
Content-Type: multipart/form-data

file: <å›¾ç‰‡æ–‡ä»¶>
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å›¾ç‰‡åˆ‡å‰²æˆåŠŸ",
  "data": {
    "original_url": "/static/uploads/xxx.jpg",
    "grid_urls": [
      "/static/grid_images/xxx_1.jpg",
      "/static/grid_images/xxx_2.jpg",
      "/static/grid_images/xxx_3.jpg",
      "/static/grid_images/xxx_4.jpg",
      "/static/grid_images/xxx_5.jpg",
      "/static/grid_images/xxx_6.jpg",
      "/static/grid_images/xxx_7.jpg",
      "/static/grid_images/xxx_8.jpg",
      "/static/grid_images/xxx_9.jpg"
    ],
    "unique_name": "uuid-xxx"
  }
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 500,
  "message": "å¤„ç†å¤±è´¥: é”™è¯¯è¯¦æƒ…",
  "data": null
}
```

### GET /health

**å“åº”**ï¼š
```json
{
  "status": "healthy",
  "service": "image-splitter"
}
```

## ğŸ“Š æ–‡ä»¶å¤§å°å‚è€ƒ

### åç«¯æ–‡ä»¶
- `main.py` ~ 8 KB
- `requirements.txt` ~ 100 B
- æ€»åç«¯ç›®å½• ~ 10 KB

### å‰ç«¯æ–‡ä»¶
- `split.js` ~ 8 KB
- `split.wxml` ~ 4 KB
- `split.wxss` ~ 7 KB
- `split.json` ~ 200 B
- æ€»splité¡µé¢ ~ 20 KB

### ç”Ÿæˆæ–‡ä»¶
- ä¸Šä¼ çš„åŸå›¾ï¼š~500 KB - 2 MB
- 9å¼ åˆ‡å‰²å›¾ï¼šæ¯å¼  ~50-200 KB

## ğŸ¯ å¼€å‘æ£€æŸ¥æ¸…å•

### ç¯å¢ƒæ£€æŸ¥
- [ ] Python 3.8+ å·²å®‰è£…
- [ ] Node.js å·²å®‰è£…
- [ ] å¾®ä¿¡å¼€å‘è€…å·¥å…·å·²å®‰è£…
- [ ] åç«¯ä¾èµ–å·²å®‰è£…
- [ ] åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ

### é…ç½®æ£€æŸ¥
- [ ] åç«¯baseUrlå·²é…ç½®
- [ ] CORSå·²æ­£ç¡®é…ç½®
- [ ] åŸŸåæ ¡éªŒå·²å…³é—­ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
- [ ] é¡µé¢è·¯ç”±å·²æ·»åŠ åˆ°app.json

### åŠŸèƒ½æ£€æŸ¥
- [ ] åç«¯å¥åº·æ£€æŸ¥æ­£å¸¸
- [ ] å›¾ç‰‡ä¸Šä¼ æ¥å£æ­£å¸¸
- [ ] å›¾ç‰‡åˆ‡å‰²åŠŸèƒ½æ­£å¸¸
- [ ] é™æ€èµ„æºè®¿é—®æ­£å¸¸
- [ ] å°ç¨‹åºå›¾ç‰‡ä¸Šä¼ æ­£å¸¸
- [ ] æ‹¼å›¾æ¸¸æˆé€»è¾‘æ­£å¸¸
- [ ] èƒœåˆ©æ£€æµ‹åŠŸèƒ½æ­£å¸¸

---

**é¡¹ç›®ç‰ˆæœ¬**ï¼šv1.0.0
**æœ€åæ›´æ–°**ï¼š2024-01
**ç»´æŠ¤è€…**ï¼šYour Name